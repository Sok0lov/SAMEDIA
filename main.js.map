{"version":3,"file":"main.js","mappings":"mBAKAA,SAASC,iBAAiB,oBAAoB,WAG5C,GAFcD,SAASE,cAAc,UAErC,CAEA,IAAMC,EAAaH,SAASI,eAAe,eACrCC,EAAYL,SAASI,eAAe,cACpCE,EAAeN,SAASI,eAAe,iBACvCG,EAASP,SAASI,eAAe,gBAEvCD,EAAWF,iBAAiB,UAAU,SAAUO,GAC5CA,EAAEC,iBAEFN,EAAWO,MAAMC,QAAU,OAC3BJ,EAAOG,MAAMC,QAAU,QAEvB,IAAMC,EAAWZ,SAASI,eAAe,YAAYS,MAC/CC,EAAWd,SAASI,eAAe,YAAYS,MAErDP,EAAaS,YAAc,GAE3B,IAAMC,EAAS,0DAAHC,OAA6DL,EAAQ,cAAAK,OAAaH,GAE9FI,MAAMF,GACLG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAAAG,GAKF,GAHAnB,EAAWO,MAAMC,QAAU,QAC3BJ,EAAOG,MAAMC,QAAU,OAEH,OAAhBW,EAAKC,OAAiB,CACxB,IAAMC,EAAiB,IAAIC,KAC3BD,EAAeE,QAAQF,EAAeG,UAAY,GAE9C3B,SAAS4B,OAAS,SAAHX,OAAYK,EAAKO,MAAK,cAAAZ,OAAaO,EAAeM,cAAa,YAEhFzB,EAAUK,MAAMC,QAAU,OAE1B,IAAMoB,EAAiB/B,SAASgC,cAAc,OAC9CD,EAAehB,YAAc,GAAHE,OAAMK,EAAKW,KAAKC,KAAI,8BAC9CH,EAAeI,UAAY,sBAE3B,IAAMC,EAAUpC,SAASgC,cAAc,UACvCI,EAAQrB,YAAc,8BACtBqB,EAAQD,UAAY,mCACpBC,EAAQC,KAAO,SAEfD,EAAQnC,iBAAiB,SAAS,WAChCqC,OAAOC,SAASC,KAAO,GACzB,IAEA,IAAMC,EAAiBzC,SAASE,cAAc,mBAC9CuC,EAAeC,YAAYX,GAC3BU,EAAeC,YAAYN,EAE/B,MAAO,GAAoB,UAAhBd,EAAKC,OAAoB,CAElC,IAAMoB,EAAmB3C,SAASgC,cAAc,KAChDW,EAAiB5B,YAAcO,EAAKhB,aACpCqC,EAAiBR,UAAY,oBAC7B7B,EAAaoC,YAAYC,GAEN3C,SAAS4C,iBAAiB,iBAClCC,SAAQ,SAAAC,GACjBA,EAAMpC,MAAMqC,OAAS,oBACrBD,EAAMpC,MAAMsC,MAAQ,SACtB,GACJ,MACI1C,EAAaS,YAAc,+BAEjC,IACCkC,OAAM,SAAAC,GACH/C,EAAWO,MAAMC,QAAU,QAC3BJ,EAAOG,MAAMC,QAAU,OAGvBwC,QAAQD,MAAM,UAAWA,EAC7B,GACJ,GA3EiB,CA4EnB,G","sources":["webpack://samedia/./src/index.js"],"sourcesContent":["import './scss/main.scss';\r\n\r\n\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  const login = document.querySelector(\".login\");\r\n\r\n  if(!login) return;\r\n\r\n  const loginInner = document.getElementById(\"login-inner\");\r\n  const loginForm = document.getElementById(\"login-form\");\r\n  const errorMessage = document.getElementById(\"error-message\");\r\n  const loader = document.getElementById(\"login-loader\");\r\n\r\n  loginInner.addEventListener(\"submit\", function (e) {\r\n      e.preventDefault();\r\n\r\n      loginInner.style.display = \"none\";\r\n      loader.style.display = \"block\";\r\n\r\n      const username = document.getElementById(\"username\").value;\r\n      const password = document.getElementById(\"password\").value;\r\n\r\n      errorMessage.textContent = \"\";\r\n\r\n      const apiUrl = `https://test-works.pr-uni.ru/api/login/index.php?login=${username}&password=${password}`;\r\n\r\n      fetch(apiUrl)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n\r\n          loginInner.style.display = \"block\";\r\n          loader.style.display = \"none\";\r\n         \r\n          if (data.status === \"ok\") {\r\n            const expirationDate = new Date();\r\n            expirationDate.setDate(expirationDate.getDate() + 7);\r\n              \r\n                document.cookie = `token=${data.token}; expires=${expirationDate.toUTCString()}; path=/`;\r\n\r\n              loginForm.style.display = \"none\";\r\n\r\n              const successMessage = document.createElement(\"div\");\r\n              successMessage.textContent = `${data.user.name}, Вы успешно авторизованы!`;\r\n              successMessage.className = 'login__sucsess-text'\r\n\r\n              const homeBtn = document.createElement(\"button\");\r\n              homeBtn.textContent = \"Перейти на главную страницу\";\r\n              homeBtn.className = 'login__button-home login__button'\r\n              homeBtn.type = \"button\";\r\n\r\n              homeBtn.addEventListener('click', function() {\r\n                window.location.href = '/';\r\n              });\r\n\r\n              const loginContainer = document.querySelector(\".login__sucsess\");\r\n              loginContainer.appendChild(successMessage);\r\n              loginContainer.appendChild(homeBtn);\r\n\r\n          } else if (data.status === \"error\") {\r\n\r\n            const errorMessageText = document.createElement(\"p\");\r\n            errorMessageText.textContent = data.errorMessage;\r\n            errorMessageText.className = 'login__error-text'\r\n            errorMessage.appendChild(errorMessageText);\r\n\r\n            const loginInput = document.querySelectorAll('.login__input');\r\n            loginInput.forEach(input => {\r\n              input.style.border = '1px solid #F65454';\r\n              input.style.color = '#F65454';\r\n            });\r\n        } else {\r\n            errorMessage.textContent = \"Произошла неизвестная ошибка.\";\r\n        } \r\n      })\r\n      .catch(error => {\r\n          loginInner.style.display = \"block\";\r\n          loader.style.display = \"none\";\r\n\r\n          // Обработка ошибки запроса...\r\n          console.error('Ошибка:', error);\r\n      });\r\n  });\r\n});"],"names":["document","addEventListener","querySelector","loginInner","getElementById","loginForm","errorMessage","loader","e","preventDefault","style","display","username","value","password","textContent","apiUrl","concat","fetch","then","response","json","data","status","expirationDate","Date","setDate","getDate","cookie","token","toUTCString","successMessage","createElement","user","name","className","homeBtn","type","window","location","href","loginContainer","appendChild","errorMessageText","querySelectorAll","forEach","input","border","color","catch","error","console"],"sourceRoot":""}