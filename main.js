(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector(".login")){var e=document.getElementById("login-inner"),t=document.getElementById("login-form"),n=document.getElementById("error-message"),o=document.getElementById("login-loader");e.addEventListener("submit",(function(l){l.preventDefault(),e.style.display="none",o.style.display="block";var s=document.getElementById("username").value,c=document.getElementById("password").value;n.textContent="";var a="https://test-works.pr-uni.ru/api/login/index.php?login=".concat(s,"&password=").concat(c);fetch(a).then((function(e){return e.json()})).then((function(l){if(e.style.display="block",o.style.display="none","ok"===l.status){console.log(5);var s=new Date;s.setDate(s.getDate()+7),document.cookie="token=".concat(l.token,"; expires=").concat(s.toUTCString(),"; path=/"),t.style.display="none";var c=document.createElement("div");c.textContent="".concat(l.user.name,", Вы успешно авторизованы!"),c.className="login__sucsess-text";var a=document.createElement("button");a.textContent="Перейти на главную страницу",a.className="login__button-home login__button",a.type="button",a.addEventListener("click",(function(){window.location.href="/"}));var r=document.querySelector(".login__sucsess");r.appendChild(c),r.appendChild(a)}else if("error"===l.status){var i=document.createElement("p");i.textContent=l.errorMessage,i.className="login__error-text",n.appendChild(i),document.querySelectorAll(".login__input").forEach((function(e){e.style.border="1px solid #F65454",e.style.color="#F65454"}))}else console.log(3),n.textContent="Произошла неизвестная ошибка."})).catch((function(t){e.style.display="block",o.style.display="none",console.log(4),console.error("Ошибка:",t)}))}))}}))})();
//# sourceMappingURL=main.js.map